{% extends 'base.html' %}
{% load static %}
{% block content %}
<div class="row">
  <div class="col-md-4 mb-3">
    <div class="card p-3">
      <h5>Search resources</h5>
      <input id="search-input" class="form-control mb-2" placeholder="Search by title...">
      <select id="subject-filter" class="form-select mb-2">
        <option value="">All subjects</option>
        {% for s in subjects %}<option value="{{ s.id }}">{{ s.name }}</option>{% endfor %}
      </select>
      <select id="grade-filter" class="form-select mb-2">
        <option value="">All grades</option>
        {% for g in grades %}<option value="{{ g.id }}">{{ g.name }}</option>{% endfor %}
      </select>
      <button id="search-btn" class="btn btn-primary w-100">Search</button>
    </div>
  </div>
  <div class="col-md-8">
    <div id="results" class="row g-3">
      {% for r in resources %}
      <div class="col-12 col-sm-6">
        <div class="card h-100">
          {% if r.image %}
          <img src="{{ r.image.url }}" class="card-img-top" style="height:160px;object-fit:cover;">
          {% endif %}
          <div class="card-body">
            <h5 class="card-title"><a href="{% url 'main:resource_detail' r.id %}">{{ r.title }}</a></h5>
            <p class="card-text small text-muted">{{ r.subject }} â€¢ {{ r.grade }}</p>
            <p class="card-text">{{ r.description|truncatechars:120 }}</p>
          </div>
        </div>
      </div>
      {% empty %}
      <p>No resources yet.</p>
      {% endfor %}
    </div>
  </div>
</div>
{% endblock %}
